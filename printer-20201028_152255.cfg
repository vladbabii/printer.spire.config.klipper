[include kiauh.cfg]
[include print_macros.cfg]

#########################################################

[stepper_a]
step_pin: ar54
dir_pin: ar55
enable_pin: !ar38
step_distance: 0.00625
endstop_pin: ar3 
#ar2
homing_speed: 50
#position_endstop: 267.455447
### 248.215447 + 19.04 + 0.2=
### 260 - 12.8 -> 247.2
#               ~ 297.05
#arm_length: 290.0
#angle: 210.055871
homing_speed: 10
homing_retract_dist: 5
second_homing_speed: 2
homing_positive_dir: True

[tmc2209 stepper_a]
uart_pin: ar63
microsteps: 16
run_current: 1.4
hold_current: 1.000
stealthchop_threshold: 0

#########################################################

[stepper_b]
step_pin: ar60
dir_pin: !ar61
enable_pin: !ar56
step_distance: 0.00625
endstop_pin: ar14
#ar15
#position_endstop: 267.399632
### 248.159632 + 19.04 + 0.2
#angle: 329.977509

homing_speed: 10
homing_retract_dist: 5
second_homing_speed: 2
homing_positive_dir: True

[tmc2209 stepper_b]
uart_pin: ar40
microsteps: 16
run_current: 1.4
hold_current: 1.000
stealthchop_threshold: 0

#########################################################

[stepper_c]
step_pin: ar46
dir_pin: ar48
enable_pin: !ar62
step_distance: 0.00625
endstop_pin: ar18
#ar19

#position_endstop: 267.514719
### 248.274719 + 19.04 + 0.2
#angle: 90

homing_speed: 10
homing_retract_dist: 5
second_homing_speed: 2
homing_positive_dir: True

[tmc2209 stepper_c]
uart_pin: ar42
microsteps: 16
run_current: 1.4
hold_current: 1.000
stealthchop_threshold: 0

#########################################################

[extruder]
step_pin: ar26
dir_pin: !ar28
enable_pin: !ar24
step_distance: 0.00236434
#### .0022
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: ar8
sensor_type: NTC 100K beta 3950
sensor_pin: analog13
## // PID parameters: pid_Kp=20.318 pid_Ki=1.302 pid_Kd=79.239
control: pid
pid_Kp: 20.318
pid_Ki: 1.302
pid_Kd: 79.239
min_temp: 0
max_temp: 290
min_extrude_temp: 1
instantaneous_corner_velocity: 1.000
#   The maximum instantaneous velocity change (in mm/s) of the
#   extruder during the junction of two moves. The default is 1mm/s.
#max_extrude_only_velocity:
#max_extrude_only_accel:
#   Maximum velocity (in mm/s) and acceleration (in mm/s^2) of the
#   extruder motor for retractions and extrude-only moves. These
#   settings do not have any impact on normal printing moves. If not
#   specified then they are calculated to match the limit an XY
#   printing move with a cross section of 4.0*nozzle_diameter^2 would
#   have.


[tmc2208 extruder]
uart_pin: ar44
microsteps: 16
run_current: 0.35
hold_current: 0.3
stealthchop_threshold: 0

[heater_fan extruder0fan]
heater: extruder
pin: ar7
shutdown_speed: 1
heater: extruder
heater_temp: 40
fan_speed: 1

#########################################################

[probe]
pin: ar19
z_offset: 19.46
## 19.04 + 0.2
## +0.4 for new purple probe
speed: 3
samples: 3

#########################################################

[heater_bed]
heater_pin: ar10
## ar8
sensor_type: NTC 100K beta 3950
sensor_pin: analog14
## PID parameters: pid_Kp=73.466 pid_Ki=1.317 pid_Kd=1024.857
control: pid
pid_Kp: 73.466
pid_Ki: 1.317
pid_Kd: 1024.857
#watermark
min_temp: 0
max_temp: 90

#########################################################

# Print cooling fan (omit section if fan not present).
[fan]
pin: ar9

#########################################################

[mcu]
serial: /dev/printerserial
pin_map: arduino

#########################################################

[printer]
kinematics: delta
max_velocity: 400
max_accel: 15000
max_z_velocity: 250
minimum_z_position: -35
#delta_radius: 183.113940
#           ( 435 - 13 (distance from m3 spacer/screw to 2040) ) / 2 = 422 / 2 = 211
#           ~174.75
print_radius: 230
square_corner_velocity: 5.0

## a to b balljoint distance : 350
## printer radius            : 202.072594216
## effector offset           : 26
## smooth_rod_offset - effector_offset - carriage_offset = delta_radius
##    202.072594216 -        26       -       0         = 176


[delta_calibrate]
radius: 100
#speed: 50
horizontal_move_z: 30

[bed_mesh]
speed: 120
horizontal_move_z: 30
mesh_radius: 100
mesh_origin: 0,0
round_probe_count: 7
algorithm: bicubic
# bicubic_tension: 0.2

[idle_timeout]
gcode:
  G0
timeout: 600

[force_move]
enable_force_move: True

[bed_mesh]
speed: 120
horizontal_move_z: 10
mesh_radius: 100
mesh_origin: 0,0
round_probe_count: 5
algorithm: bicubic
# bicubic_tension: 0.2

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.023990, -0.023990, -0.023990, -0.023990, -0.023990
#*# 	-0.009008, -0.009008, -0.007935, 0.010774, 0.010774
#*# 	0.131447, 0.008594, 0.002017, -0.004228, -0.064837
#*# 	-0.031698, -0.031698, -0.010732, -0.008824, -0.008824
#*# 	-0.002261, -0.002261, -0.002261, -0.002261, -0.002261
#*# tension = 0.2
#*# min_x = -100.0
#*# algo = bicubic
#*# y_count = 5
#*# mesh_y_pps = 2
#*# min_y = -100.0
#*# x_count = 5
#*# max_y = 100.0
#*# mesh_x_pps = 2
#*# max_x = 100.0
#*#
#*# [printer]
#*# delta_radius = 183.393438
#*#
#*# [stepper_a]
#*# angle = 210.101855
#*# arm_length = 290.000000
#*# position_endstop = 267.404241
#*#
#*# [stepper_b]
#*# angle = 329.976623
#*# arm_length = 290.000000
#*# position_endstop = 267.296827
#*#
#*# [stepper_c]
#*# angle = 90.000000
#*# arm_length = 290.000000
#*# position_endstop = 267.32358
#*#
#*# [delta_calibrate]
#*# height0 = 19.06
#*# height0_pos = 39660.000,39651.000,39670.000
#*# height1 = 19.06
#*# height1_pos = 50771.333,50753.333,31423.333
#*# height2 = 19.06
#*# height2_pos = 36797.667,60025.667,36798.667
#*# height3 = 19.06
#*# height3_pos = 31971.000,48953.000,48977.000
#*# height4 = 19.06
#*# height4_pos = 36940.000,36935.000,53005.000
#*# height5 = 19.06
#*# height5_pos = 47352.333,32565.333,47372.333
#*# height6 = 19.06
#*# height6_pos = 56120.000,36822.000,36837.000
